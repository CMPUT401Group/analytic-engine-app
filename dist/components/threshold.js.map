{"version":3,"sources":["../../src/components/threshold.js"],"names":["ThresholdPageCtrl","$scope","$injector","$http","backendSrv","threshold","updateThreshold","getConfig","url","config","jsonData","analyticEngineURL","method","then","thresholds","response","data","map","pattern","console","log","cb","get","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCAAMA,iB;AACJ,mCAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,KAA/B,EAAsCC,UAAtC,EAAkD;AAAA;;AAChD,eAAKH,MAAL,GAAcA,MAAd;AACA,eAAKE,KAAL,GAAaA,KAAb;AACA,eAAKC,UAAL,GAAkBA,UAAlB;;AAEA,eAAKC,SAAL,GAAiB,EAAjB;;AAEA,eAAKC,eAAL;AACD;;;;4CAEiB;AAAA;;AAChB,iBAAKC,SAAL,CAAe,kBAAU;AACvB,kBAAIC,MAAMC,OAAOC,QAAP,CAAgBC,iBAA1B;AACA,oBAAKR,KAAL,CAAW;AACTS,wBAAQ,KADC;AAETJ,qBAAQA,GAAR;AAFS,eAAX,EAGGK,IAHH,CAGQ,oBAAY;AAClB;AACA;AACA,sBAAKZ,MAAL,CAAYa,UAAZ,GAAyBC,SAASC,IAAT,CAAcC,GAAd,CAAkB,qBAAa;AACtD,yBAAOZ,UAAUa,OAAV,CAAkB,CAAlB,CAAP;AACD,iBAFwB,CAAzB;AAGD,eATD,EASG,oBAAY;AACb;AACAC,wBAAQC,GAAR,CAAYL,QAAZ;AACD,eAZD;AAaD,aAfD;AAgBD;;;oCAESM,E,EAAI;AACZ,iBAAKjB,UAAL,CAAgBkB,GAAhB,CAAoB,0CAApB,EAAgET,IAAhE,CAAqE,UAASJ,MAAT,EAAiB;AACpFY,iBAAGZ,MAAH;AACD,aAFD;AAGD;;;;;;AAGHT,wBAAkBuB,WAAlB,GAAgC,2BAAhC;;mCACOvB,iB","file":"threshold.js","sourcesContent":["class ThresholdPageCtrl {\n  constructor($scope, $injector, $http, backendSrv) {\n    this.$scope = $scope;\n    this.$http = $http;\n    this.backendSrv = backendSrv;\n\n    this.threshold = [];\n\n    this.updateThreshold();\n  }\n\n  updateThreshold() {\n    this.getConfig(config => {\n      let url = config.jsonData.analyticEngineURL;\n      this.$http({\n        method: 'GET',\n        url: `${url}/pattern/threshold`\n      }).then(response => {\n        // TODO: for now we only handle threshold with one pattern inside. Note,\n        //       a single threshold pattern can hold many threshold inside. Refactor?\n        this.$scope.thresholds = response.data.map(threshold => {\n          return threshold.pattern[0];\n        });\n      }, response => {\n        // todo: Use grafana toast thing to report error.\n        console.log(response);\n      });\n    });\n  }\n\n  getConfig(cb) {\n    this.backendSrv.get('api/plugins/analytic-engine-app/settings').then(function(config) {\n      cb(config);\n    });\n  }\n}\n\nThresholdPageCtrl.templateUrl = 'components/threshold.html';\nexport{ThresholdPageCtrl};\n"]}