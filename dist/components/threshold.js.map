{"version":3,"sources":["../../src/components/threshold.js"],"names":["ThresholdPageCtrl","$scope","$injector","$http","$log","backendSrv","thresholds","updateThreshold","getConfig","url","config","jsonData","analyticEngineURL","method","then","response","data","map","threshold","pattern","console","log","cb","get","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCAAMA,iB;AACJ,mCAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,KAA/B,EAAsCC,IAAtC,EAA4CC,UAA5C,EAAwD;AAAA;;AACtD,eAAKJ,MAAL,GAAcA,MAAd;AACA,eAAKE,KAAL,GAAaA,KAAb;AACA,eAAKC,IAAL,GAAYA,IAAZ;AACA,eAAKC,UAAL,GAAkBA,UAAlB;;AAEA,eAAKC,UAAL,GAAkB,EAAlB;;AAEA,eAAKC,eAAL;AACD;;;;4CAEiB;AAAA;;AAChB,iBAAKC,SAAL,CAAe,kBAAU;AACvB,kBAAIC,MAAMC,OAAOC,QAAP,CAAgBC,iBAA1B;AACA,oBAAKT,KAAL,CAAW;AACTU,wBAAQ,KADC;AAETJ,qBAAQA,GAAR;AAFS,eAAX,EAGGK,IAHH,CAGQ,oBAAY;AAClB;AACA;AACA,sBAAKR,UAAL,GAAkBS,SAASC,IAAT,CAAcC,GAAd,CAAkB,qBAAa;AAC/C,yBAAOC,UAAUC,OAAV,CAAkB,CAAlB,CAAP;AACD,iBAFiB,CAAlB;AAGD,eATD,EASG,oBAAY;AACb;AACAC,wBAAQC,GAAR,CAAYN,QAAZ;AACD,eAZD;AAaD,aAfD;AAgBD;;;oCAESO,E,EAAI;AACZ,iBAAKjB,UAAL,CAAgBkB,GAAhB,CAAoB,0CAApB,EAAgET,IAAhE,CAAqE,UAASJ,MAAT,EAAiB;AACpFY,iBAAGZ,MAAH;AACD,aAFD;AAGD;;;;;;AAGHV,wBAAkBwB,WAAlB,GAAgC,2BAAhC;;mCACOxB,iB","file":"threshold.js","sourcesContent":["class ThresholdPageCtrl {\r\n  constructor($scope, $injector, $http, $log, backendSrv) {\r\n    this.$scope = $scope;\r\n    this.$http = $http;\r\n    this.$log = $log;\r\n    this.backendSrv = backendSrv;\r\n\r\n    this.thresholds = [];\r\n\r\n    this.updateThreshold();\r\n  }\r\n\r\n  updateThreshold() {\r\n    this.getConfig(config => {\r\n      let url = config.jsonData.analyticEngineURL;\r\n      this.$http({\r\n        method: 'GET',\r\n        url: `${url}/pattern/threshold`\r\n      }).then(response => {\r\n        // TODO: for now we only handle threshold with one pattern inside. Note,\r\n        //       a single threshold pattern can hold many threshold inside. Refactor?\r\n        this.thresholds = response.data.map(threshold => {\r\n          return threshold.pattern[0];\r\n        });\r\n      }, response => {\r\n        // todo: Use grafana toast thing to report error.\r\n        console.log(response);\r\n      });\r\n    });\r\n  }\r\n\r\n  getConfig(cb) {\r\n    this.backendSrv.get('api/plugins/analytic-engine-app/settings').then(function(config) {\r\n      cb(config);\r\n    });\r\n  }\r\n}\r\n\r\nThresholdPageCtrl.templateUrl = 'components/threshold.html';\r\nexport{ThresholdPageCtrl};\r\n"]}